{% extends 'base.html.twig' %}

{% block title %}Je suis sur l'index{% endblock %}

{% block body %}
    {% form_theme form 'theme/add_article_type.html.twig' %}
    {{ form(form) }}
{% endblock %}

{% block javascripts %}
    <script type="text/javascript">
        var form = document.querySelector('div#article_images');
        var formCount = form.children.length;
        console.info(form);

        var button = document.querySelector('button#add_file');

        button.addEventListener('click', function () {
            add()
        });

        if (formCount === 0) {
            add();
        }

        function add() {
            var prototype = form.getAttribute('data-prototype');
            var template = prototype.replace(/__name__label__/, 'New file')
                                    .replace(/__name__/, formCount);

            console.info(template);

            form.innerHTML += template;

            formCount++;
        }
    </script>
{% endblock %}